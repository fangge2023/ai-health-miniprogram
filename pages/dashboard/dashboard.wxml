<view class="container">
  <!-- 顶部用户信息 -->
  <view class="user-header">
    <view class="user-info">
      <view class="avatar">
        <open-data type="userAvatarUrl"></open-data>
      </view>
      <view class="greeting">
        <text class="hello">你好，</text>
        <open-data type="userNickName" class="username"></open-data>
      </view>
    </view>
    <view class="date-info">
      <text class="today-date">{{todayDate}}</text>
    </view>
  </view>
  
  <!-- 健康数据概览卡片 -->
  <view class="health-overview">
    <view class="card-header">
      <text class="card-title">今日健康概览</text>
    </view>
    
    <view class="health-stats">
      <view class="stat-item">
        <view class="stat-icon calories-icon">🔥</view>
        <view class="stat-info">
          <text class="stat-value">{{caloriesConsumed || 0}}/{{caloriesTarget || 2000}}</text>
          <text class="stat-label">卡路里</text>
        </view>
      </view>
      
      <view class="stat-item">
        <view class="stat-icon steps-icon">👣</view>
        <view class="stat-info">
          <text class="stat-value">{{steps || 0}}/{{stepsTarget || 8000}}</text>
          <text class="stat-label">步数</text>
        </view>
      </view>
      
      <view class="stat-item">
        <view class="stat-icon water-icon">💧</view>
        <view class="stat-info">
          <text class="stat-value">{{waterIntake || 0}}/{{waterTarget || 8}}</text>
          <text class="stat-label">饮水(杯)</text>
        </view>
      </view>
      
      <view class="stat-item">
        <view class="stat-icon weight-icon">⚖️</view>
        <view class="stat-info">
          <text class="stat-value">{{currentWeight || '--'}} kg</text>
          <text class="stat-label">体重</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 减重进度卡片 -->
  <view class="weight-progress-card">
    <view class="card-header">
      <text class="card-title">减重进度</text>
      <text class="card-subtitle">距离目标还有 {{daysToGoal || '--'}} 天</text>
    </view>
    
    <view class="weight-chart">
      <view class="weight-info">
        <view class="weight-item">
          <text class="weight-label">初始</text>
          <text class="weight-value">{{initialWeight || '--'}} kg</text>
        </view>
        <view class="weight-item">
          <text class="weight-label">当前</text>
          <text class="weight-value">{{currentWeight || '--'}} kg</text>
        </view>
        <view class="weight-item">
          <text class="weight-label">目标</text>
          <text class="weight-value">{{targetWeight || '--'}} kg</text>
        </view>
      </view>
      
      <view class="progress-container">
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{weightProgressPercentage || 0}}%;"></view>
        </view>
        <text class="progress-text">{{weightProgressPercentage || 0}}% 完成</text>
      </view>
    </view>
  </view>
  
  <!-- 快捷功能卡片 -->
  <view class="quick-actions">
    <view class="action-row">
      <view class="action-item" bindtap="navigateToDiet">
        <view class="action-icon food-icon">🍽️</view>
        <text class="action-text">记录饮食</text>
      </view>
      
      <view class="action-item" bindtap="navigateToExercise">
        <view class="action-icon exercise-icon">🏃</view>
        <text class="action-text">记录运动</text>
      </view>
      
      <view class="action-item" bindtap="navigateToWater">
        <view class="action-icon water-add-icon">💧</view>
        <text class="action-text">添加饮水</text>
      </view>
      
      <view class="action-item" bindtap="navigateToWeight">
        <view class="action-icon weight-add-icon">⚖️</view>
        <text class="action-text">更新体重</text>
      </view>
    </view>
  </view>
  
  <!-- 健康提示卡片 -->
  <view class="health-tips">
    <view class="card-header">
      <text class="card-title">今日健康提示</text>
      <text class="refresh-tips" bindtap="refreshTips">换一条</text>
    </view>
    
    <view class="tip-content">
      <view class="tip-icon">💡</view>
      <text class="tip-text">{{dailyTip || '保持规律的运动习惯可以帮助提高基础代谢率，即使在休息时也能消耗更多热量。'}}</text>
    </view>
  </view>
  
  <!-- 每周趋势卡片 -->
  <view class="weekly-trends">
    <view class="card-header">
      <text class="card-title">每周趋势</text>
      <text class="view-more" bindtap="viewMoreStats">查看更多</text>
    </view>
    
    <view class="chart-container">
      <ec-canvas id="weekly-chart" canvas-id="weekly-chart" ec="{{ec}}"></ec-canvas>
    </view>
  </view>
</view>