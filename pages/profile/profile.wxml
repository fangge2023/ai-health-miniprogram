<!--pages/profile/profile.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-avatar">
      <image class="avatar-img" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" />
      <button class="avatar-edit" bindtap="changeAvatar">ğŸ“·</button>
    </view>
    <view class="user-info">
      <text class="user-name">{{userInfo.nickname || 'æœªè®¾ç½®æ˜µç§°'}}</text>
      <text class="user-desc">{{userStatus}}</text>
    </view>
  </view>

  <!-- ç›®æ ‡è®¾ç½® -->
  <view class="card">
    <view class="card-header">å‡è‚¥ç›®æ ‡</view>
    <view class="goal-item" bindtap="setGoal" data-type="weight">
      <text class="goal-label">ç›®æ ‡ä½“é‡</text>
      <text class="goal-value">{{goals.targetWeight || 'æœªè®¾ç½®'}}kg</text>
    </view>
    <view class="goal-item" bindtap="setGoal" data-type="date">
      <text class="goal-label">ç›®æ ‡æ—¥æœŸ</text>
      <text class="goal-value">{{goals.targetDate || 'æœªè®¾ç½®'}}</text>
    </view>
  </view>

  <!-- åŸºæœ¬ä¿¡æ¯ -->
  <view class="card">
    <view class="card-header">åŸºæœ¬ä¿¡æ¯</view>
    <view class="info-item" bindtap="editInfo" data-type="gender">
      <text class="info-label">æ€§åˆ«</text>
      <text class="info-value">{{userInfo.gender || 'æœªè®¾ç½®'}}</text>
    </view>
    <view class="info-item" bindtap="editInfo" data-type="age">
      <text class="info-label">å¹´é¾„</text>
      <text class="info-value">{{userInfo.age || 'æœªè®¾ç½®'}}å²</text>
    </view>
    <view class="info-item" bindtap="editInfo" data-type="height">
      <text class="info-label">èº«é«˜</text>
      <text class="info-value">{{userInfo.height || 'æœªè®¾ç½®'}}cm</text>
    </view>
  </view>

  <!-- è®¾ç½®é€‰é¡¹ -->
  <view class="card">
    <view class="card-header">è®¾ç½®</view>
    <view class="setting-item" bindtap="openSetting" data-type="notification">
      <text class="setting-label">æ¶ˆæ¯é€šçŸ¥</text>
      <switch checked="{{settings.notification}}" bindchange="toggleSetting" data-type="notification" />
    </view>
    <view class="setting-item" bindtap="openSetting" data-type="privacy">
      <text class="setting-label">éšç§è®¾ç½®</text>
      <text class="setting-arrow">></text>
    </view>
  </view>

  <!-- å…¶ä»–åŠŸèƒ½ -->
  <view class="card">
    <view class="card-header">å…¶ä»–</view>
    <view class="function-item" bindtap="exportData">
      <text class="function-label">å¯¼å‡ºæ•°æ®</text>
      <text class="function-arrow">></text>
    </view>
    <view class="function-item" bindtap="feedback">
      <text class="function-label">æ„è§åé¦ˆ</text>
      <text class="function-arrow">></text>
    </view>
    <view class="function-item" bindtap="about">
      <text class="function-label">å…³äºåº”ç”¨</text>
      <text class="function-arrow">></text>
    </view>
  </view>
</view>