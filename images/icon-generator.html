<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾®ä¿¡å°ç¨‹åºå›¾æ ‡ç”Ÿæˆå™¨</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #4CAF50;
            text-align: center;
            margin-bottom: 30px;
        }
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .icon-item {
            text-align: center;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .icon-item:hover {
            border-color: #4CAF50;
            background-color: #f0f8f0;
        }
        .icon-item.active {
            border-color: #4CAF50;
            background-color: #e8f5e8;
        }
        .icon-preview {
            width: 40px;
            height: 40px;
            margin: 0 auto 10px;
            background-color: #666;
            position: relative;
        }
        .icon-preview.active {
            background-color: #4CAF50;
        }
        .icon-name {
            font-size: 14px;
            color: #666;
        }
        .download-section {
            text-align: center;
            margin-top: 30px;
        }
        .btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            text-decoration: none;
            display: inline-block;
        }
        .btn:hover {
            background-color: #45a049;
        }
        .instructions {
            background-color: #f0f8f0;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #4CAF50;
        }
        .canvas-container {
            display: none;
        }
        .size-selector {
            margin: 20px 0;
            text-align: center;
        }
        .size-selector label {
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ å¾®ä¿¡å°ç¨‹åºå›¾æ ‡ç”Ÿæˆå™¨</h1>
        
        <div class="instructions">
            <h3>ğŸ“ ä½¿ç”¨è¯´æ˜</h3>
            <ol>
                <li>é€‰æ‹©éœ€è¦çš„å›¾æ ‡ç±»å‹</li>
                <li>é€‰æ‹©å›¾æ ‡å°ºå¯¸ï¼ˆæ™®é€š/æ¿€æ´»çŠ¶æ€ï¼‰</li>
                <li>ç‚¹å‡»"ç”Ÿæˆå›¾æ ‡"æŒ‰é’®</li>
                <li>å³é”®ä¿å­˜ç”Ÿæˆçš„å›¾æ ‡åˆ°é¡¹ç›®çš„imagesç›®å½•</li>
            </ol>
        </div>

        <div class="size-selector">
            <label>
                <input type="radio" name="size" value="normal" checked> æ™®é€šçŠ¶æ€ (24x24)
            </label>
            <label>
                <input type="radio" name="size" value="active"> æ¿€æ´»çŠ¶æ€ (24x24)
            </label>
        </div>

        <div class="icon-grid">
            <div class="icon-item" data-icon="home">
                <div class="icon-preview" id="home-preview"></div>
                <div class="icon-name">é¦–é¡µ (home)</div>
            </div>
            <div class="icon-item" data-icon="ai">
                <div class="icon-preview" id="ai-preview"></div>
                <div class="icon-name">AIå’¨è¯¢ (ai)</div>
            </div>
            <div class="icon-item" data-icon="diet">
                <div class="icon-preview" id="diet-preview"></div>
                <div class="icon-name">é¥®é£Ÿ (diet)</div>
            </div>
            <div class="icon-item" data-icon="exercise">
                <div class="icon-preview" id="exercise-preview"></div>
                <div class="icon-name">è¿åŠ¨ (exercise)</div>
            </div>
            <div class="icon-item" data-icon="profile">
                <div class="icon-preview" id="profile-preview"></div>
                <div class="icon-name">æˆ‘çš„ (profile)</div>
            </div>
        </div>

        <div class="download-section">
            <button class="btn" onclick="generateIcon()">ğŸ¨ ç”Ÿæˆé€‰ä¸­çš„å›¾æ ‡</button>
            <button class="btn" onclick="generateAllIcons()">ğŸ“¦ ç”Ÿæˆæ‰€æœ‰å›¾æ ‡</button>
            <a href="#" class="btn" id="downloadLink" style="display:none;">ğŸ’¾ ä¸‹è½½å›¾æ ‡</a>
        </div>

        <div class="canvas-container">
            <canvas id="iconCanvas" width="24" height="24"></canvas>
        </div>
    </div>

    <script>
        let selectedIcon = 'home';
        let selectedSize = 'normal';

        // å›¾æ ‡å®šä¹‰
        const icons = {
            home: {
                normal: '#666666',
                active: '#4CAF50',
                draw: (ctx, color) => {
                    // ç»˜åˆ¶æˆ¿å­å›¾æ ‡
                    ctx.fillStyle = color;
                    ctx.beginPath();
                    // å±‹é¡¶
                    ctx.moveTo(12, 3);
                    ctx.lineTo(21, 12);
                    ctx.lineTo(3, 12);
                    ctx.closePath();
                    ctx.fill();
                    // æˆ¿å­ä¸»ä½“
                    ctx.fillRect(5, 12, 14, 9);
                    // é—¨
                    ctx.fillStyle = '#ffffff';
                    ctx.fillRect(10, 15, 4, 6);
                }
            },
            ai: {
                normal: '#666666',
                active: '#4CAF50',
                draw: (ctx, color) => {
                    // ç»˜åˆ¶AIæœºå™¨äººå›¾æ ‡
                    ctx.fillStyle = color;
                    // å¤´éƒ¨
                    ctx.fillRect(8, 4, 8, 6);
                    // èº«ä½“
                    ctx.fillRect(6, 10, 12, 8);
                    // çœ¼ç›
                    ctx.fillStyle = '#ffffff';
                    ctx.fillRect(9, 6, 2, 2);
                    ctx.fillRect(13, 6, 2, 2);
                    // å¤©çº¿
                    ctx.fillStyle = color;
                    ctx.fillRect(11, 2, 2, 2);
                }
            },
            diet: {
                normal: '#666666',
                active: '#4CAF50',
                draw: (ctx, color) => {
                    // ç»˜åˆ¶é¤å…·å›¾æ ‡
                    ctx.fillStyle = color;
                    // ç›˜å­
                    ctx.beginPath();
                    ctx.arc(12, 12, 8, 0, Math.PI * 2);
                    ctx.fill();
                    // å†…åœˆ
                    ctx.fillStyle = '#ffffff';
                    ctx.beginPath();
                    ctx.arc(12, 12, 6, 0, Math.PI * 2);
                    ctx.fill();
                    // å‰å­
                    ctx.fillStyle = color;
                    ctx.fillRect(8, 8, 1, 8);
                    ctx.fillRect(7, 8, 1, 3);
                    ctx.fillRect(9, 8, 1, 3);
                }
            },
            exercise: {
                normal: '#666666',
                active: '#4CAF50',
                draw: (ctx, color) => {
                    // ç»˜åˆ¶è¿åŠ¨å›¾æ ‡
                    ctx.fillStyle = color;
                    // å¤´
                    ctx.beginPath();
                    ctx.arc(12, 7, 3, 0, Math.PI * 2);
                    ctx.fill();
                    // èº«ä½“
                    ctx.fillRect(10, 10, 4, 6);
                    // æ‰‹è‡‚
                    ctx.fillRect(6, 11, 4, 2);
                    ctx.fillRect(14, 11, 4, 2);
                    // è…¿
                    ctx.fillRect(9, 16, 2, 5);
                    ctx.fillRect(13, 16, 2, 5);
                }
            },
            profile: {
                normal: '#666666',
                active: '#4CAF50',
                draw: (ctx, color) => {
                    // ç»˜åˆ¶ç”¨æˆ·å›¾æ ‡
                    ctx.fillStyle = color;
                    // å¤´
                    ctx.beginPath();
                    ctx.arc(12, 8, 4, 0, Math.PI * 2);
                    ctx.fill();
                    // èº«ä½“
                    ctx.beginPath();
                    ctx.arc(12, 20, 7, Math.PI, 0, true);
                    ctx.fill();
                }
            }
        };

        // é€‰æ‹©å›¾æ ‡
        document.querySelectorAll('.icon-item').forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.icon-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                selectedIcon = item.dataset.icon;
                updatePreview();
            });
        });

        // é€‰æ‹©å°ºå¯¸
        document.querySelectorAll('input[name="size"]').forEach(radio => {
            radio.addEventListener('change', () => {
                selectedSize = radio.value;
                updatePreview();
            });
        });

        // æ›´æ–°é¢„è§ˆ
        function updatePreview() {
            document.querySelectorAll('.icon-preview').forEach(preview => {
                const iconType = preview.id.replace('-preview', '');
                preview.classList.remove('active');
                if (iconType === selectedIcon && selectedSize === 'active') {
                    preview.classList.add('active');
                }
            });
        }

        // ç”Ÿæˆå•ä¸ªå›¾æ ‡
        function generateIcon() {
            if (!selectedIcon) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªå›¾æ ‡');
                return;
            }

            const canvas = document.getElementById('iconCanvas');
            const ctx = canvas.getContext('2d');
            const icon = icons[selectedIcon];
            const color = selectedSize === 'active' ? icon.active : icon.normal;

            // æ¸…ç©ºç”»å¸ƒ
            ctx.clearRect(0, 0, 24, 24);
            
            // ç»˜åˆ¶å›¾æ ‡
            icon.draw(ctx, color);

            // åˆ›å»ºä¸‹è½½é“¾æ¥
            canvas.toBlob(blob => {
                const url = URL.createObjectURL(blob);
                const link = document.getElementById('downloadLink');
                link.href = url;
                link.download = `tab-${selectedIcon}${selectedSize === 'active' ? '-active' : ''}.png`;
                link.style.display = 'inline-block';
                link.textContent = `ğŸ’¾ ä¸‹è½½ ${selectedIcon}${selectedSize === 'active' ? '-active' : ''}.png`;
            });
        }

        // ç”Ÿæˆæ‰€æœ‰å›¾æ ‡
        function generateAllIcons() {
            const canvas = document.getElementById('iconCanvas');
            const ctx = canvas.getContext('2d');
            const zip = new JSZip();

            Object.keys(icons).forEach(iconName => {
                ['normal', 'active'].forEach(state => {
                    const icon = icons[iconName];
                    const color = state === 'active' ? icon.active : icon.normal;

                    // æ¸…ç©ºç”»å¸ƒ
                    ctx.clearRect(0, 0, 24, 24);
                    
                    // ç»˜åˆ¶å›¾æ ‡
                    icon.draw(ctx, color);

                    // è½¬æ¢ä¸ºæ•°æ®URL
                    const dataURL = canvas.toDataURL('image/png');
                    const data = dataURL.split(',')[1];
                    zip.file(`tab-${iconName}${state === 'active' ? '-active' : ''}.png`, data, {base64: true});
                });
            });

            // ä¸‹è½½ZIPæ–‡ä»¶
            zip.generateAsync({type:"blob"}).then(content => {
                const link = document.createElement('a');
                link.href = URL.createObjectURL(content);
                link.download = "miniprogram-icons.zip";
                link.click();
            });
        }

        // åˆå§‹åŒ–
        document.querySelector('.icon-item').classList.add('active');
        updatePreview();
    </script>
</body>
</html>